<!DOCTYPE html>
<html>
<head>
	<title>Calculator</title>
	<meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <!-- Favicon-->

        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />

        <style>
        	.first-section {
        		padding-bottom: 100px;
        	}

        	h2, h3, h4 {
        		padding: 40px;
        	}

        	#fail, .success {
        		display: none;
        	}
        </style>
</head>
<body>
	<!-- First Section -->
	<div class="container first-section">
		<div class="row">
			<div class="col-md-12 text-center">
				<h2>Calculator</h2>
			</div>
			<div class="col-md-4 text-center">
				<label for="date">Date Of Birth:</label>
				<input type="date" name="date" id="birth-date">
			</div>
			<div class="col-md-4 text-center">
				<label for="currentDate">Current Date: </label>
				<input type="date" name="currentDate" id="current-date">
			</div>
			<div class="col-md-4 text-center">
				<button class="btn btn-primary" id="submit">Convert</button>
			</div>			
		</div>
	</div>
	
	<!-- Second Section -->
	<div class="container">
		<div class="row">
			<div class="col-md-6 text-center success">
				<div id="result">
					<h4>Result</h4>
					<strong></strong>
				</div>
				
			</div>
			<div class="col-md-6 text-center success">
				<div id="element">
					<h4>Element</h4>
					<strong></strong>
				</div>
			</div>

			<div class="col-md-12 text-center" id="fail">
				<strong>Make sure both fields are not empty!</strong>
			</div>
		</div>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>

		var global = window;
		jQuery("#submit").click(function() {
			var dateBirth = jQuery("#birth-date").val();
			var currentDate = jQuery("#current-date").val();

			if (dateBirth == "" || currentDate == "") {
				jQuery("#fail").css("display", "block");
				return;
			}

			// console.log(global.twoStringMerge);
			

			// var dateBirth = "1991/10/07";
			// var currentDate = "2020/12/01";

			var first = [];

			/* Convert to array again and separate them by one digit */
			// var oneDigit = firstStep.split("");

			/* Merge birth day, month and current year */
			var first = global.mergeMDTodayY(dateBirth, currentDate);

			/* convert array to string */
			var firstSum = global.arrString(first);

			/* Sum of all digits in string */
			var firstSumDigits = global.addNeighbor(firstSum.split(""));

			/* Convert int to string */
			var firstInt2String = firstSumDigits.toString();

			/* add all digits again in string */
			var firstResult = global.addNeighbor( firstInt2String.split("") );

			/* Get current month */
			var currentMonth = global.getmonth(currentDate, "month");

			// console.log(firstResult);
			// console.log(currentMonth);

			/* convert int to string and Add them together Result to current Month*/
			var mergeMR = global.twoStringMerge(firstResult, currentMonth);

			/* Add all digits together */
			var secondResult = global.addNeighbor(mergeMR);

			/* Get Current Day */
			var currentDay = global.getmonth(currentDate, "day");

			/* Merge result to current day */
			var mergeDR = global.twoStringMerge(secondResult, currentDay);

			/* Add all digits together */
			var thirdResult = global.addNeighbor( mergeDR.split("") );

			/* Display result */
			jQuery(".success #result strong").html( thirdResult );
			jQuery(".success #element strong").html( getElements(dateBirth) );

			jQuery(".success").css("display", "block");

			// console.log(thirdResult);
			// console.log("Your Element: " + getElements(dateBirth))
		});

		
		/* sum of birth month, day and current year by one digit */

		/* merge birth month, birth day and current year */
		function mergeMDTodayY(dateBirth, currentDate) {
			/* Split date of birth */
			var birthMonthDay = dateBirth.split("-");

			var arr = [];
			/* pass month and day to new array */
			for (var i = 0; i < birthMonthDay.length; i++) {
				if (i != 0) {
					arr.push(birthMonthDay[i]);
				}
				
			}

			/* pass current year to new array */
			arr.push(currentDate.split("-")[0]);

			return arr;
		}

		/* Convert array to string w/o space */
		function arrString(arr) {
			var data = "";
			for (var i = 0; i < arr.length; i++) {
				data += arr[i]
			}

			return data;
		}

		/* Adding all number by their neighbor number */
		function addNeighbor(arr) {
			var sumYearBirthMD = 0;
			for (var i = 0; i < arr.length; i++) {
				sumYearBirthMD = parseInt(sumYearBirthMD) + parseInt(arr[i]);
			}

			return sumYearBirthMD;
		}

		/* Get month */
		function getmonth(date, which) {
			var arr = date.split("-");
			var date;

			/* Year */
			if ( which == "year" ) {
				date = arr[0];
			}
			/* Month */
			else if ( which == "month" ) {
				date = arr[1];
			}
			/* Day */
			else {
				date = arr[2];
			}
			return date;
		}

		/* Merge two string */
		function twoStringMerge(one, two) {
			// console.log(one);
			// console.log(two);
			return one.toString()+two.toString();
		}

		/* Get Year Element */
		function getElements(date) {
			var elements = [
				"Metal", "Metal",
				"Water", "Water",
				"Wood", "Wood",
				"Fire", "Fire",
				"Earth", "Water",
			];

			var year = date.split("-")[0];
			return elements[year.substring(3, 4)];
		}

	</script>
</body>
</html>